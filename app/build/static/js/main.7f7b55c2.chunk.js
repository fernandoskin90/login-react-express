(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{27:function(n,t,e){n.exports=e(37)},37:function(n,t,e){"use strict";e.r(t);var a=e(0),r=e.n(a),o=e(20),c=e.n(o),i=e(11),u=e(8),l=e(3),s=e(1),p=e(2);function d(){var n=Object(s.a)(["\n  font-style: italic;\n"]);return d=function(){return n},n}function f(){var n=Object(s.a)(["\n  font-weight: bold;\n"]);return f=function(){return n},n}function h(){var n=Object(s.a)(["\n  border: 1px gray solid;\n  box-shadow: 2px 2px 10px 2px lightgray;\n  display: flex;\n  flex-direction: column;\n  max-width: 300px;\n  padding: 10px;\n"]);return h=function(){return n},n}var m=p.a.div(h()),b=p.a.div(f()),g=p.a.div(d()),v=function(n){var t=n.body,e=n.title;return r.a.createElement(m,null,r.a.createElement(b,null,e),r.a.createElement(g,null,t))},x=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};window.localStorage.setItem("posts_app_token",n),t()},j=function(){return window.localStorage.getItem("posts_app_token")},O=function(){var n=Object(a.useState)(!1),t=Object(l.a)(n,2),e=t[0],r=t[1],o=Object(a.useState)(!1),c=Object(l.a)(o,2),i=c[0],u=c[1],s=Object(a.useState)(!0),p=Object(l.a)(s,2),d=p[0],f=p[1];return Object(a.useEffect)(function(){var n=j();n?fetch("http://localhost:5000/user/authByToken",{method:"POST",headers:{Authorization:"Bearer ".concat(n)}}).then(function(n){return n.json()}).then(function(n){var t=n.data;u(!!t&&t.userValid),f(!1)}).catch(function(n){console.error(n),r(!0)}):(f(!1),r(!0))},[]),{error:e,loading:d,userValid:i}};function E(){var n=Object(s.a)(["\n  background-color: tomato;\n  border-radius: 20px;\n  bottom: 32px;\n  color: #FFF;\n  cursor: pointer;\n  font-size: 1.1rem;\n  position: fixed;\n  right: 32px;\n"]);return E=function(){return n},n}function w(){var n=Object(s.a)(["\n  display: grid;\n  grid-gap: 10px;\n  grid-template-columns: repeat(auto-fill, 300px);\n  grid-template-rows: repeat(auto-fill, 1fr);\n  height: calc(100vh - 60px);\n  overflow-y: auto;\n  padding: 20px;\n"]);return w=function(){return n},n}var y=p.a.div(w()),S=p.a.button(E()),k=function(n){var t=n.history,e=Object(a.useState)(!1),o=Object(l.a)(e,2),c=o[0],i=o[1],s=Object(a.useState)([]),p=Object(l.a)(s,2),d=p[0],f=p[1],h=O(),m=h.error,b=h.loading,g=h.userValid;return Object(a.useEffect)(function(){g&&(i(!0),fetch("http://localhost:5000/posts",{headers:{Authorization:"Bearer ".concat(j()),Accept:"application/json","Content-Type":"application/json"}}).then(function(n){return n.json()}).then(function(n){var t=n.data;n.message,i(!1),f(t)}).catch(function(n){console.warn(n)}))},[g]),m?r.a.createElement(u.a,{to:"/login"}):b||c?r.a.createElement("h1",null,"Loading ..."):r.a.createElement(y,null,d.map(function(n,t){var e=n.body,a=n.title;return r.a.createElement(v,{body:e,key:"post-".concat(t),title:a})}),r.a.createElement(S,{onClick:function(){!function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};window.localStorage.removeItem("posts_app_token"),n()}(function(){t.push("/login")})}},"Logout"))};function C(){var n=Object(s.a)(["\n  color: tomato;\n  font-size: 1rem;\n  text-align: center;\n"]);return C=function(){return n},n}function T(){var n=Object(s.a)(["\n  animation: "," 1.5s linear infinite;\n  border: 3px tomato solid;\n  border-right: 3px transparent solid;\n  border-radius: 50%;\n  bottom: 35px;\n  height: 15px;\n  position: absolute;\n  right: 45px;\n  width: 15px;\n"]);return T=function(){return n},n}function _(){var n=Object(s.a)(["\n  margin: 5px auto;\n  max-width: 100px;\n"]);return _=function(){return n},n}function z(){var n=Object(s.a)(["\n  margin: 5px auto;\n"]);return z=function(){return n},n}function A(){var n=Object(s.a)(["\n  align-items: center;\n  justify-content: center;\n  display: flex;\n  height: calc(100vh - 20px);\n"]);return A=function(){return n},n}function B(){var n=Object(s.a)(["\n  justify-content: center;\n  border: 1px solid grey;\n  box-shadow: 2px 2px 5px 2px gray;\n  display: flex;\n  flex-direction: column;\n  height: 150px;\n  position: relative;\n  width: 200px;\n"]);return B=function(){return n},n}function L(){var n=Object(s.a)(["\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n"]);return L=function(){return n},n}var P=Object(p.b)(L()),V=p.a.div(B()),I=p.a.div(A()),J=p.a.input(z()),N=p.a.button(_()),F=p.a.div(T(),P),W=p.a.div(C()),R=function(n){var t=n.history,e=Object(a.useState)(!1),o=Object(l.a)(e,2),c=o[0],i=o[1],s=Object(a.useState)(""),p=Object(l.a)(s,2),d=p[0],f=p[1],h=Object(a.useState)(""),m=Object(l.a)(h,2),b=m[0],g=m[1],v=Object(a.useState)(""),j=Object(l.a)(v,2),E=j[0],w=j[1],y=O(),S=y.loading,k=y.userValid;return S?r.a.createElement("div",null,"Loading ..."):k?r.a.createElement(u.a,{to:"/"}):r.a.createElement(I,null,r.a.createElement(V,null,r.a.createElement(J,{onChange:function(n){return f(n.target.value)},placeholder:"Email",value:d}),r.a.createElement(J,{onChange:function(n){return g(n.target.value)},placeholder:"Password",type:"password",value:b}),r.a.createElement(N,{disabled:!d||!b||c,onClick:function(){i(!0),w(""),fetch("http://localhost:5000/user/login",{body:JSON.stringify({email:d,password:b}),headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"}).then(function(n){return n.json()}).then(function(n){var e=n.data,a=n.message;i(!1),e&&e.token&&x(e.token,function(){return t.push("/")}),!e&&a&&w(a)}).catch(function(n){console.warn(n)})}},"Login"),c&&r.a.createElement(F,null),r.a.createElement(N,{onClick:function(){return t.push("/register")}},"To register"),r.a.createElement(W,null,E)))};function U(){var n=Object(s.a)(["\n  color: tomato;\n  font-size: 1rem;\n  text-align: center;\n"]);return U=function(){return n},n}function $(){var n=Object(s.a)(["\n  animation: "," 1.5s linear infinite;\n  border: 3px tomato solid;\n  border-right: 3px transparent solid;\n  border-radius: 50%;\n  bottom: 35px;\n  height: 15px;\n  position: absolute;\n  right: 45px;\n  width: 15px;\n"]);return $=function(){return n},n}function q(){var n=Object(s.a)(["\n  margin: 5px auto;\n  max-width: 100px;\n"]);return q=function(){return n},n}function D(){var n=Object(s.a)(["\n  margin: 5px auto;\n"]);return D=function(){return n},n}function G(){var n=Object(s.a)(["\n  align-items: center;\n  justify-content: center;\n  display: flex;\n  height: calc(100vh - 20px);\n"]);return G=function(){return n},n}function H(){var n=Object(s.a)(["\n  justify-content: center;\n  border: 1px solid grey;\n  box-shadow: 2px 2px 5px 2px gray;\n  display: flex;\n  flex-direction: column;\n  height: 250px;\n  position: relative;\n  width: 250px;\n"]);return H=function(){return n},n}function K(){var n=Object(s.a)(["\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n"]);return K=function(){return n},n}var M=Object(p.b)(K()),Q=p.a.div(H()),X=p.a.div(G()),Y=p.a.input(D()),Z=p.a.button(q()),nn=p.a.div($(),M),tn=p.a.div(U()),en=function(n){var t=n.history,e=Object(a.useState)(!1),o=Object(l.a)(e,2),c=o[0],i=o[1],s=Object(a.useState)(""),p=Object(l.a)(s,2),d=p[0],f=p[1],h=Object(a.useState)(""),m=Object(l.a)(h,2),b=m[0],g=m[1],v=Object(a.useState)(""),j=Object(l.a)(v,2),E=j[0],w=j[1],y=Object(a.useState)(""),S=Object(l.a)(y,2),k=S[0],C=S[1],T=Object(a.useState)(""),_=Object(l.a)(T,2),z=_[0],A=_[1],B=O(),L=B.loading,P=B.userValid;return L?r.a.createElement("div",null,"Loading ..."):P?r.a.createElement(u.a,{to:"/"}):r.a.createElement(X,null,r.a.createElement(Q,null,r.a.createElement(Y,{onChange:function(n){return w(n.target.value)},placeholder:"Name",value:E}),r.a.createElement(Y,{onChange:function(n){return C(n.target.value)},placeholder:"Username",value:k}),r.a.createElement(Y,{onChange:function(n){return f(n.target.value)},placeholder:"Email",value:d}),r.a.createElement(Y,{onChange:function(n){return g(n.target.value)},placeholder:"Password",type:"password",value:b}),r.a.createElement(Z,{disabled:!d||!b||!E||!k||c,onClick:function(){i(!0),A(""),fetch("http://localhost:5000/user/register",{body:JSON.stringify({email:d,name:E,password:b,userName:k}),headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"}).then(function(n){return n.json()}).then(function(n){var e=n.data,a=n.message;i(!1),e&&e.token&&x(e.token,function(){return t.push("/")}),!e&&a&&A(a)}).catch(function(n){console.warn(n)})}},"Register"),c&&r.a.createElement(nn,null),r.a.createElement(Z,{onClick:function(){return t.push("/login")}},"To login"),r.a.createElement(tn,null,z)))},an=function(){return r.a.createElement(i.a,{basename:"/"},r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/login",component:R}),r.a.createElement(u.b,{exact:!0,path:"/register",component:en}),r.a.createElement(u.b,{exact:!0,path:"/",component:k}),r.a.createElement(u.b,{render:function(){return r.a.createElement(u.a,{to:"/"})}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(an,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(n){n.unregister()})}},[[27,1,2]]]);
//# sourceMappingURL=main.7f7b55c2.chunk.js.map